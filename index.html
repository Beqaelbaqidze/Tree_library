<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <script>
      var baseUrl = `https://office.napr.gov.ge/lr-test/bo/landreg-5/cadtree`;
    </script>

    <title>Component Of Tree</title>
  </head>
  <body>
    <!-- <button id="openModalBtn" class="setting-button">Setting</button>

    <div id="myModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <p>This is your modal content.</p>
      </div>
    </div> -->
    <!-- <button class="wide" id="wide">Hide Structure</button> -->
    <div class="searchDiv" id="searchContainer"></div>

    <div class="container" id="container"></div>
    <div class="button-container">
      <button id="backButton">Back</button>
      <button id="reloadButton">Reload</button>
      <button id="forwardButton">Forward</button>
    </div>
    <div class="containterIframe" id="containterIframe"></div>

    <script type="module">
      // main.js
      import { mainClass } from "./main.class.js";
      import { SearchClass } from "./search.class.js";
      import { CadTreeClass } from "./cadTree.class.js";

      const custom = {
        rootElement: "#container",
        url: baseUrl + "?FRAME_NAME=CADTREE.BROWSER.JSON&PRNT_ID",
        method: "GET",
        headers: {
          "Content-Type": "application/json",
        },
        label: ["name"],
        icons: ["icon", "statusIcon"],
        changeIcons: ["iconSelected"],
        iconsUrl: baseUrl,
      };
      const custom1 = {
        rootElement: "#searchContainer",
        url: baseUrl + "?FRAME_NAME=CADTREE.HIERARCHY.JSON&CADCODE=",
        method: "GET",
        headers: {
          "Content-Type": "application/json",
        },
        label: ["name"],
        icons: ["icon", "statusIcon"],
        changeIcons: ["iconSelected"],
        iconsUrl: baseUrl,
      };
      const custom2 = {
        rootElement: "#containterIframe",
        url: baseUrl + "?FRAME_NAME=CADTREE.RIGHT_PAGES.JSON&ID=",
        method: "GET",
      };

      const vMainClass = new mainClass(custom);
      const vSearchClass = new SearchClass(custom1);
      const vCadTreeClass = new CadTreeClass(custom2);

      vCadTreeClass.inject({
        rootElement: custom2.rootElement,
        url: "http://office.napr.gov.ge/lr-test/bo/landreg-5/cadtree?FRAME_NAME=CADTREE.RIGHT_PAGES.JSON&ID=",
      });

      //For Iframe function
      const iframe = document.getElementById("pagesHtml");
      const backButton = document.getElementById("backButton");
      const reloadButton = document.getElementById("reloadButton");
      const forwardButton = document.getElementById("forwardButton");

      backButton.addEventListener("click", goBack);
      reloadButton.addEventListener("click", reload);
      forwardButton.addEventListener("click", goForward);

      function goBack(event) {
        event.preventDefault();
        iframe.contentWindow.history.back();
      }

      function reload(event) {
        event.preventDefault();
        iframe.contentWindow.location.reload();
      }

      function goForward(event) {
        event.preventDefault();
        iframe.contentWindow.history.forward();
      }
    </script>
    <script src="ModalSetting.js"></script>
  </body>
</html>
